
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Documentation Public APIs</title>

    <!-- Bootstrap core CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="style.css" rel="stylesheet">


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>

<div class="container">

    <div class="blog-header">
        <h1 class="blog-title">General Apis</h1>
    </div>

    <div class="row">

        <div class="col-sm-8 blog-main">
            <div class="blog-post" id="dashboard-count">
                <h2>Fetch counts for work orders on dashboard</h2>
                <p>Api to fetch count of open, on hold, closed, pending work orders, total requests and inventory out of stock.</p>
                <div class="highlight">
                    <h4><span class="key">Endpoint</span>: <span class="val">https://demo-api.onupkeep.com/api/app/dashboard-count</span></h4>
                    <h4><span class="key">Method</span>: <span class="val">POST</span></h4>
                    <h4><span class="key">Parameters</span>:</h4>
                    <ul>
                        <li>sessionToken - Session token of the user.</li>
                    </ul>
                </div>
                <p>Response will contain the following objects</p>
                <pre>
                    {
                        "openWorkOrderCount": 183,
                        "onHoldWorkOrderCount": 9,
                        "pendingWorkOrderCount": 4,
                        "completeWorkOrder": 40,
                        "openRequestCount": 184,
                        "inventoryOutOfStockCount": 4
                    }
                </pre>
            </div>
            <div class="blog-post">
                <h2 id="remove-logo">Remove upkeep Logo from PDFs</h2>
                <p>Ways to remove upkeep logo</p>
                <p><b>Work Order</b>: add query string excludeUpkeepLogo=1 to the get request of print work order eg.</p>
                <div class="highlight">
                    <p>https://demo-api.onupkeep.com/api/print-workorder?id=d7NXxmgBqy&excludeUpkeepLogo=1</p>
                </div>
                <p><b>Invoice</b>: add parameter excludeUpkeepLogo: true to the post request of print invoice.</p>
                <p><b>Purchase Order</b>: add parameter excludeUpkeepLogo: true to the post request of print purchase order.</p>
            </div>

            <div class="blog-post">
                <h2 id="sign-up">Sign Up</h2>
                <p>Api to sign up</p>
                <div class="highlight">
                    <h4><span class="key">Endpoint</span>: <span class="val">https://api.onupkeep.com/auth/signup</span></h4>
                    <h4><span class="key">Method</span>: <span class="val">POST</span></h4>
                    <h4><span class="key">Parameters</span>:</h4>
                    <ul>
                        <li>email - Email id of person signing up.</li>
                        <li>password - Password.</li>
                        <li>platform - Platform used for sign up(web,android,ios).</li>
                        <li>companyName(Optional) - Name of user's company.</li>
                        <li>companyBusinessType (Optional) - String representing business type.</li>
                        <li>phoneNumber (Optional) - String representing phone number of user.</li>
                        <li>firstName (Optional) - String representing first name of user.</li>
                        <li>lastName (Optional) - String representing last name of user.</li>
                    </ul>
                </div>
                <p>On success session token will be returned in <b>sessionToken</b> key</p>
                <p>On error a json with  <b>message</b> key will show message returned by parse signup.</p>
            </div>
             <div class="blog-post">
                <h2>Locations export to csv</h2>
                <p>Export company locations to a csv file</p>
                <div class="highlight">
                    <h4><span class="key">Endpoint</span>: <span class="val">https://api.onupkeep.com/api/app/export-csv-locations</span></h4>
                    <h4><span class="key">Method</span>: <span class="val">POST</span></h4>
                    <h4><span class="key">Parameters</span>:</h4>
                    <ul>
                        <li>sessionToken - Session token of the user.</li>
                    </ul>
                </div>
                <p>On success email will be sent to user with export link and link will also be returned in response. Opening this link will download csv file</p>
            </div>
            <div class="blog-post">
                <h2>Refering Upkeep</h2>
                <p>Api to refer upkeep to someone.</p>
                <div class="highlight">
                    <h4><span class="key">Endpoint</span>: <span class="val">https://api.onupkeep.com/api/app/refer</span></h4>
                    <h4><span class="key">Method</span>: <span class="val">POST</span></h4>
                    <h4><span class="key">Parameters</span>:</h4>
                    <ul>
                        <li>senderEmail - Email id of person refering.</li>
                        <li>sendToEmails - Array of email ids of people being refered.</li>
                    </ul>
                </div>
                <p>On success emails will be sent to people introducing them to upkeep.</p>
            </div>
            <div class="blog-post">
                <h2>Locations export to csv</h2>
                <p>Export company locations to a csv file</p>
                <div class="highlight">
                    <h4><span class="key">Endpoint</span>: <span class="val">https://api.onupkeep.com/api/app/export-csv-locations</span></h4>
                    <h4><span class="key">Method</span>: <span class="val">POST</span></h4>
                    <h4><span class="key">Parameters</span>:</h4>
                    <ul>
                        <li>sessionToken - Session token of the user.</li>
                    </ul>
                </div>
                <p>On success email will be sent to user with export link and link will also be returned in response. Opening this link will download csv file</p>
            </div>
            <div class="blog-post">
                <h2>Get User Plan Details</h2>
                <p>Fetch user plan related information from role</p>
                <div class="highlight">
                    <h4><span class="key">Endpoint</span>: <span class="val">https://api.onupkeep.com/api/app/user-plan-status</span></h4>
                    <h4><span class="key">Method</span>: <span class="val">POST</span></h4>
                    <h4><span class="key">Parameters</span>:</h4>
                    <ul>
                        <li>roleId - Role id of the user's company.</li>
                    </ul>
                </div>
                <p>On success user plan information will be returned the format will be similar to cloud function getPremiumUserDetails eg</p>
                <pre>
                    {
                        "companyID": {...},
                        "creditCardDetails": [
                          {...}
                        ],
                        "defaultSource": "card_id",
                        "subscription": {...},
                        "isPremiumUser": true,
                        "isSpecialUser": false,
                        "planName": "Starter Annual",
                        "activeUntil": 1511345407,
                        "premiumAccountStatus": "STARTER_PLAN_ACTIVE",
                        "exceedsLimitOnPlan": true,
                        "noOfUsers": 5
                    }
                </pre>
            </div>
        </div><!-- /.blog-main -->

    </div><!-- /.row -->

</div><!-- /.container -->
<div class="footer">

</div>


<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://code.jquery.com/ui/1.12.1/jquery-ui.min.js"><\/script>')</script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</body>
</html>
