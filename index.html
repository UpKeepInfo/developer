
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Documentation Public APIs</title>

    <!-- Bootstrap core CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="style.css" rel="stylesheet">


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>

<div class="container">

    <div class="blog-header">
        <h1 class="blog-title">Upkeep API Docs</h1>
    </div>

    <div class="row">

        <div class="col-sm-8 blog-main">

            <div class="blog-post">
                <h2>Enable/Disable Sharing of work order with unauthorised user</h2>
                <p>Enabling and Disabling of sharing will be done via frontent just like any normal field update. '<b>shareStatus</b>' will be set to <b>true</b> or <b>false</b> enable sharing and disable it respectively.</p>
            </div><!-- /.blog-post -->

            <div class="blog-post">
                <h2>Get share link</h2>
                <p>Will return share link</p>
                <div class="highlight">
                    <h4><span class="key">Endpoint</span>: <span class="val">https://demo-api.onupkeep.com/api/public/share-link</span></h4>
                    <h4><span class="key">Method</span>: <span class="val">POST</span></h4>
                    <h4><span class="key">Parameters</span>:</h4>
                    <ul>
                        <li>workOrderId - Id of the work order.</li>
                     </ul>
                </div>
                <p>On succes returned <b>link</b> key will have shared workorder url.</p>
            </div><!-- /.blog-post -->

            <div class="blog-post">
                <h2>Fetch shared work order for unauthorised user</h2>
                <p>The shareable link will redirect the user to frontend platform. the link will be of the format  'https://vendor.onupkeep.com/#/workorder/WOKORDER_ID'. On the platform make call to this api.</p>
                <div class="highlight">
                    <h4><span class="key">Endpoint</span>: <span class="val">https://demo-api.onupkeep.com/api/public/public-shared-workorder</span></h4>
                    <h4><span class="key">Method</span>: <span class="val">POST</span></h4>
                    <h4><span class="key">Parameters</span>:</h4>
                    <ul>
                        <li>workOrderId - Id of the work order.</li>
                   </ul>
                </div>
                <p>Work order object will be returned on success.</p>
            </div><!-- /.blog-post -->

            <div class="blog-post">
                <h2>Update shared work order</h2>
                <p>Updates Shared work order by unauthorised user</p>
                <div class="highlight">
                    <h4><span class="key">Endpoint</span>: <span class="val">https://demo-api.onupkeep.com/api/public/shared-workorder-update</span></h4>
                    <h4><span class="key">Method</span>: <span class="val">POST</span></h4>
                    <h4><span class="key">Encoding</span>: <span class="val">multipart/form-data</span></h4>
                    <h4><span class="key">Parameters</span>:</h4>
                    <ul>
                        <li>workOrderId - Id of the work order.</li>
                        <li>status(Optional) - new status of work order ('open', 'complete', 'onHold', 'inProgress').</li>
                        <li>time(Optional) - string representing time.</li>
                        <li>cost(Optional) - string representing cost.</li>
                        <li>updateNote(Optional) - string representing update note.</li>
                        <li>image(Optional) - File upload object.</li>
                    </ul>
                </div>
                <p>Work order object will be returned on success. For image updates request must be 'multipart/form-data' and the key name for file will be 'image' as described above</p>
            </div><!-- /.blog-post -->

            <div class="blog-post">
                <h2>Zapier Update Api</h2>
                <p>Sends data to zapier on status change of work order, new work order creation, request approved and new request creation.</p>
                <div class="highlight">
                    <h4><span class="key">Endpoint</span>: <span class="val">https://api.onupkeep.com/api/public/workorder-updated</span></h4>
                    <h4><span class="key">Method</span>: <span class="val">POST</span></h4>
                    <h4><span class="key">Parameters</span>:</h4>
                    <ul>
                        <li>roleId - Role id of the user's company.</li>
                        <li>workOrderId - Id of the work order.</li>
                        <li>event - Type of event (ie 'status_changed','workorder_created','request_created', 'request_approved').</li>
                        <li>userId - Id of the user triggering event.</li>
                        <li>previousStatus - Status before change(open, inProgress, onHold ie format saved in database).This field is required when event is 'status_changed' and needs to be skipped for other events.</li>
                    </ul>
                </div>
                <p>This api must be called after the completion of task ie after workorder/request has been created or status has been changed or request is approved.</p>
            </div><!-- /.blog-post -->

            <div class="blog-post">
                <h2>Get User Plan Details</h2>
                <p>Fetch user plan related information from role</p>
                <div class="highlight">
                    <h4><span class="key">Endpoint</span>: <span class="val">https://api.onupkeep.com/api/app/user-plan-status</span></h4>
                    <h4><span class="key">Method</span>: <span class="val">POST</span></h4>
                    <h4><span class="key">Parameters</span>:</h4>
                    <ul>
                        <li>roleId - Role id of the user's company.</li>
                    </ul>
                </div>
                <p>On success user plan information will be returned the format will be similar to cloud function getPremiumUserDetails.</p>
            </div><!-- /.blog-post -->

            <!--<div class="blog-post">-->
                <!--<h2>Send Share Invites</h2>-->
                <!--<p>Send invite to vendor to accept sharing</p>-->
                <!--<div class="highlight">-->
                    <!--<h4><span class="key">Endpoint</span>: <span class="val">https://demo-api.onupkeep.com/api/share-invites</span></h4>-->
                    <!--<h4><span class="key">Method</span>: <span class="val">POST</span></h4>-->
                    <!--<h4><span class="key">Parameters</span>:</h4>-->
                    <!--<ul>-->
                        <!--<li>sessionToken  - Session token of user sending invite.</li>-->
                        <!--<li>vendorEmailAddress  - Email id of vendor.</li>-->
                    <!--</ul>-->
                <!--</div>-->
                <!--<p>On success invite mail will be sent to the user having accept link https://demo-api.onupkeep.com/api/invite-response?user=XXXXX&company=XXXX&accept=1 if vendor is not upkeep user message will have please sign up first also. Share deny functionality is also there but will be implemented with ui</p>-->
            <!--</div>-->
            <!--<div class="blog-post">-->
                <!--<h2>Vendor list</h2>-->
                <!--<p>Returns vendor list for who have accepted request.</p>-->
                <!--<div class="highlight">-->
                    <!--<h4><span class="key">Endpoint</span>: <span class="val">https://demo-api.onupkeep.com/api/vendors</span></h4>-->
                    <!--<h4><span class="key">Method</span>: <span class="val">POST</span></h4>-->
                    <!--<h4><span class="key">Parameters</span>:</h4>-->
                    <!--<ul>-->
                        <!--<li>sessionToken  - Session token of user sending invite.</li>-->
                    <!--</ul>-->
                <!--</div>-->
                <!--<p>On success  array of email addresses of venders who have accepted invite will be returned.</p>-->
            <!--</div>-->

            <div class="blog-post">
                <h2>Send work order share invite</h2>
                <p>Sends work order share invite to vendor</p>
                <div class="highlight">
                    <h4><span class="key">Endpoint</span>: <span class="val">https://demo-api.onupkeep.com/api/shared-workorder</span></h4>
                    <h4><span class="key">Method</span>: <span class="val">POST</span></h4>
                    <h4><span class="key">Parameters</span>:</h4>
                    <ul>
                        <li>sessionToken  - Session token of user sending invite.</li>
                        <li>vendorEmailAddress  - Email id of vendor.</li>
                        <li>workOrderId - id of the work order to be shared.</li>
                    </ul>
                </div>
                <p>On success invite will be sent to vendor with accept link</p>
            </div><!-- /.blog-post -->

            <div class="blog-post">
                <h2>Accepting invites</h2>
                <p>On clicking above link the invite will be accepted. The sender will also be notified about the invite accept. If the user is not upkeep user, Please sign up first message will be returned</p>
            </div>

            <div class="blog-post">
                <h2>Fetch all shared work orders of a company</h2>
                <p>Returns all the shared work orders of a company along with related fields.</p>
                <div class="highlight">
                    <h4><span class="key">Endpoint</span>: <span class="val">https://demo-api.onupkeep.com/api/fetch-shared-workorders</span></h4>
                    <h4><span class="key">Method</span>: <span class="val">POST</span></h4>
                    <h4><span class="key">Parameters</span>:</h4>
                    <ul>
                        <li>sessionToken  - Session token of user making request.</li>
                    </ul>
                </div>
                <p>On success returns array of shared work orders objects including related fields.</p>
            </div><!-- /.blog-post -->

            <div class="blog-post">
                <h2>Fetch a shared work order by id</h2>
                <p>Returns a shared work order with related fields</p>
                <div class="highlight">
                    <h4><span class="key">Endpoint</span>: <span class="val">https://demo-api.onupkeep.com/api/fetch-shared-workorder</span></h4>
                    <h4><span class="key">Method</span>: <span class="val">POST</span></h4>
                    <h4><span class="key">Parameters</span>:</h4>
                    <ul>
                        <li>sessionToken  - Session token of user making request.</li>
                        <li>workOrderId - id of work order.</li>
                    </ul>
                </div>
                <p>On success returns shared work order objects including related fields.</p>
            </div><!-- /.blog-post -->

        </div><!-- /.blog-main -->

    </div><!-- /.row -->

</div><!-- /.container -->
<div class="footer">

</div>


<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://code.jquery.com/ui/1.12.1/jquery-ui.min.js"><\/script>')</script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</body>
</html>
